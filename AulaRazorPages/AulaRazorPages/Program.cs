// O builder é o contrutor da aplicação, você pode configurar todos os serviços que você irá utilizar
using AulaRazorPages.Data;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);


//Essa instrução levanta todos os serviços, instancias e classes pra funcionar o Razor Pages
builder.Services.AddRazorPages();

builder.Services.AddDbContext<MoviesContext>(option =>
    option.UseInMemoryDatabase("MyFirstAppDB"));


var app = builder.Build();

app.UseStatusCodePagesWithReExecute("/errors/{0}"); //Recomendável utilizar este método
//app.UseStatusCodePagesWithRedirects("/errors/{0}"); //Não é recomendável utilizar, por questões de indexação nos buscadores, como google e bing

//app.MapGet("/", () => "Hello World!"); // significa que nesta rota "/" ele chama este método.
//A linha anterior contém uma lambda expression, isso significa um método, como se fosse o seguinte:
//string HelloWorld()
//{
//    return "Hello World!";
//}

//Antes do build configura-se os serviços, e aqui é para o aplicativo funcionar:
app.UseHttpsRedirection();
app.UseStaticFiles();
app.UseRouting();
app.MapRazorPages();


app.Run();